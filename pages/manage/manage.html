<link rel="stylesheet" href="../static/styles/manage/manage.css">
<div class="main" id="app" @click="hideFuzzyQuery" v-cloak>
    <div class="breadcrumb">
        <a href="">首页</a>
        <span class="line">/</span>
        <span>Pipeline管理</span>
        <span class="line">/</span>
        <span>pipeline信息</span>
    </div>
    <div class="table-tab-list clearfix" style="display: none">
        <div class="table-tab-item" @click="showPipelineData" :class="{'active' : pipelineJoinShow}">
            事业部pipeline信息
        </div>
        <div class="table-tab-item" @click="showPipelineJoin" :class="{'active' : pipelineDataShow}">
            pipeline交接
            <span class="badge" v-text="needOperateNumber"></span>
        </div>
    </div>
    <div :class="{'hide': pipelineDataShow}">
        <!-- 搜索框 -->
        <div class="search-wrapper clearfix">
            <input id="drow" class="hide" type="checkbox">
            <label for="drow" class="drowicon"><i class="fa fa-chevron-down"></i></label>
            <div class="content" style="width: calc(100% - 160px)">
                <div class="input-group">
                    <span class="input-group-label">客户：</span>
                    <div class="input-group1" style="position: relative;display: inline-block;">
                        <input v-model="cCustomerName"
                               @keyup="getFuzzyList(1)"
                               onkeydown="vm.keyEnterCustomer()"
                               type="text" class="input-group-form">
                        <ul v-if="fuzzyQueryList_1.length !== 0" class="fuzzy-query" style="left: 0px">
                            <li v-for="item in fuzzyQueryList_1"
                                @click="selectFuzzyText(1, item.name, item.code)"
                                v-text="item.name"
                            ></li>
                        </ul>
                    </div>
                </div>
                <div class="dropdown-wrap">
                    <span class="dropdown-label">行业线：</span>
                    <div class="dropdown">
                        <span class="dropdown-default">{{ cIndustryLineText }}</span>
                        <i class="fa fa-angle-down"></i>
                        <ul>
                            <li @click="searchIndustryLineCode('', '')">请选择</li>
                            <li @click="searchIndustryLineCode(searchList.code, searchList.text)"
                                v-for="searchList in searchLists.industryLines">{{ searchList.text }}</li>
                        </ul>
                    </div>
                </div>
                <div class="input-group">
                    <span class="input-group-label">预计签约时间：</span>
                    <input class="input-group-form"
                           readonly="readonly"
                           id="startDate"
                           @click=""
                           v-model="cExpectSignDateRange">
                </div>
                <div style="display: inline-block">
                <div class="dropdown-wrap">
                    <span class="dropdown-label">成功率：</span>
                    <div class="dropdown">
                        <span class="dropdown-default" style="min-width: 50px">{{ cProjectSuccessMinText }}</span>
                        <input type="hidden" v-text="cProjectSuccessMinCode" />
                        <i class="fa fa-angle-down"></i>
                        <ul>
                            <li @click="searchSuccessMinCode('', '')">请选择</li>
                            <li @click="searchSuccessMinCode(projectSuccessRate.code, projectSuccessRate.text)"
                                v-for="projectSuccessRate in projectSuccessRates"
                                :value="projectSuccessRate.code">{{ projectSuccessRate.text }}</li>
                        </ul>
                    </div>
                </div>
                <div class="dropdown-wrap">
                    <span class="dropdown-label">-</span>
                    <div class="dropdown">
                        <span class="dropdown-default" style="min-width: 50px">{{ cProjectSuccessMaxText }}</span>
                        <input type="hidden" v-text="cProjectSuccessMaxCode" />
                        <i class="fa fa-angle-down"></i>
                        <ul>
                            <li @click="searchSuccessMaxCode('', '')">请选择</li>
                            <li @click="searchSuccessMaxCode(projectSuccessRate.code, projectSuccessRate.text)"
                                v-for="projectSuccessRate in projectSuccessRates"
                                :value="projectSuccessRate.code">{{ projectSuccessRate.text }}</li>
                            <!--v-if="cProjectSuccessMinCode <= projectSuccessRate.code"
                                -->
                        </ul>
                    </div>
                </div>
                </div>
                <div class="dropdown-wrap">
                    <span class="dropdown-label">销售部门：</span>
                    <div class="dropdown">
                        <span class="dropdown-default">{{ cMngSalesGroupText }}</span>
                        <i class="fa fa-angle-down"></i>
                        <ul>
                            <!--TODO 如果当前人是领导的话，就用userInfo.mngSalesGroups下面的code和text；否则就用userInfo.departmentCode和userInfo.departmentName-->
                            <li @click="searchSalesGroupCode('', '')">请选择</li>
                            <li @click="searchSalesGroupCode(oauthList.code, oauthList.text)"
                                v-for="oauthList in mngSalesGroups"
                                :value="oauthList.code">{{ oauthList.text }}</li>
                        </ul>
                    </div>
                </div>
                <div class="dropdown-wrap">
                    <span class="dropdown-label">区域：</span>
                    <div class="dropdown">
                        <span class="dropdown-default">{{ cRegionText }}</span>
                        <i class="fa fa-angle-down"></i>
                        <ul>
                            <li @click="searchRegionCode('', '')">请选择</li>
                            <li @click="searchRegionCode(searchList.code, searchList.text)"
                                v-for="searchList in searchLists.regions"
                                :value="searchList.code">{{ searchList.text }}</li>
                        </ul>
                    </div>
                </div>
                <div class="dropdown-wrap">
                    <span class="dropdown-label">客户来源：</span>
                    <div class="dropdown">
                        <span class="dropdown-default">{{ cCustomerSourText }}</span>
                        <i class="fa fa-angle-down"></i>
                        <ul>
                            <li @click="searchCustomerSourceCode('', '')">请选择</li>
                            <li @click="searchCustomerSourceCode(searchList.code, searchList.text)"
                                v-for="searchList in searchLists.customerSours"
                                :value="searchList.code">{{ searchList.text }}</li>
                        </ul>
                    </div>
                </div>
                <div style="display: inline-block">
                <div class="dropdown-wrap">
                    <span class="dropdown-label">解决方案：</span>
                    <div class="dropdown">
                        <span class="dropdown-default" style="max-width: 500px;">{{ cSoSolutionFirstText }}</span>
                        <i class="fa fa-angle-down"></i>
                        <ul style="max-width: 500px;">
                            <li @click="searchSolutionFirst('', '', 1)">请选择</li>
                            <li @click="searchSolutionFirst(solutionFirstList.id, solutionFirstList.text, 1)"
                                v-for="solutionFirstList in solutionFirstLists">{{ solutionFirstList.text }}</li>
                        </ul>
                    </div>
                </div>
                <div class="dropdown-wrap">
                    <span class="dropdown-label">-</span>
                    <div class="dropdown">
                        <span class="dropdown-default" style="max-width: 500px;">{{ cSoSolutionSecondText }}</span>
                        <i class="fa fa-angle-down"></i>
                        <ul style="max-width: 500px;">
                            <li @click="searchSolutionSecond('', '', 1)">请选择</li>
                            <li @click="searchSolutionSecond(solutionSecondList.data.code, solutionSecondList.text, 1)"
                                v-for="solutionSecondList in solutionSecondLists">{{ solutionSecondList.text }}</li>
                        </ul>
                    </div>
                </div>
                </div>
                <div class="dropdown-wrap">
                    <span class="dropdown-label">近期变更过：</span>
                    <div class="dropdown">
                        <span class="dropdown-default">{{ cLatelyChangeText }}</span>
                        <i class="fa fa-angle-down"></i>
                        <ul>
                            <li @click="searchLatelyChangeCode('', '')">请选择</li>
                            <li @click="searchLatelyChangeCode(searchList.code, searchList.text)"
                                v-for="searchList in searchLists.latelyChanges">{{ searchList.text }}</li>
                        </ul>
                    </div>
                </div>
                <div v-if="userLevel !== 'xs'"
                     class="input-group">
                    <span class="input-group-label">销售：</span>
                    <div class="input-group1" style="position: relative;display: inline-block;">
                        <input v-model="cSalesName"
                               @keyup="getSales"
                               onkeydown="vm.keybordEnterSales()"
                               type="text" class="input-group-form">
                        <ul class="fuzzy-query" style="left: 0px">
                            <li v-for="item in salesList"
                                @click="selectSales(item.text, item.code)"
                                v-text="item.text"></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div style="position: absolute;right: 20px;top: 15px;">
                <button @click="querySearchForm" class="btn btn-sm btn-theme" type="button" style="margin-right: 10px">查询</button>
                <button @click="clearSearchForm" class="btn btn-sm btn-border" type="button">重置</button>
            </div>
        </div>
        <div class="main-wrapper">
            <div :class="{maxWidth: ismaxWidth}" class="data">
                <div class="subInformation clearfix" style="line-height: 30px">
                    <button v-if="userLevel == 'xs'"
                            @click="addData"
                            class="btn btn-sm btn-theme modelDomBtn"
                            style="margin-right: 10px">新增 Pipeline</button>
                    <div v-if="userLevel == 'xs'"
                         @click="upload" class="btn btn-theme"
                         style="margin-right: 15px;display: none">
                        <i class="fa fa-cloud-upload"></i>
                        <span>导入</span>
                    </div>
                    预计签约金额(万元):
                    <span class="theme-color" style="margin-right: 15px">{{ expectSignSumTotal }}</span>
                    加权金额总计(万元):
                    <span class="theme-color">{{  weightedSumTotal }}</span>
                    <div :class="{'hide': noData}" class="pull-right">
                        <div class="data-page page-css">
                            <div @click="calcDataPage('data' , 'first')"
                                 class="page-css-first">
                                <i class="fa fa-angle-double-left"></i></div>
                            <div @click="calcDataPage('data' , -1)"
                                 class="page-css-prev"
                                 style="margin-right: 10px;">
                                <i class="fa fa-angle-left"></i></div>
                            <span>第</span><input @keyup.enter="dataEnter" type="text" style="margin: 0 5px;" v-model="dataPageNum"><span>页，</span>
                            <span>共 {{dataPageSum}} 页，</span>
                            <div @click="calcDataPage('data' , 1)"
                                 class="page-css-next"><i class="fa fa-angle-right  "></i></div>
                            <div @click="calcDataPage('data' , 'last')" class="page-css-last" style="margin-right: 10px;"><i
                                    class="fa fa-angle-double-right"></i></div>
                            <span>显示</span>
                            <span style="margin-left: 5px;">{{dataPageStart}}</span>
                            <span>-</span>
                            <span style="margin-right: 5px;">{{dataPageEnd}}</span>
                            <span>条，</span>
                            <span>共&nbsp;
                            <span class="progressBtn">
                                <span style="color: #14a6ef;vertical-align: top">{{dataPageTotal}}</span>
                                <div class="progressTotal">
                                <ul class="clearfix">
                                    <li class="pull-left" style="margin-right: 20px" v-if="pscsList.code == 'effective' || pscsList.code == 'invalid'" v-for="pscsList in pscsLists">
                                        <span v-text="pscsList.val"></span>:
                                        <span v-text="pscsList.progressCount + '条'" style="color: #ed6d00"></span>；
                                    </li>
                                </ul>
                                <p class="explain">说明：<br/>无效数据：N-项目失败、X-搁置项目</p>
                            </div>
                            </span>&nbsp;
                            条</span>
                        </div>
                    </div>
                    <a @click="openUpdateCase"
                       class="pull-right1"
                       href="javascript:;"
                       style="display: none;font-size:20px;color:#ed6d00;position: absolute;right: 15px;top: 15px;"><i class="fa fa-navicon"></i></a>
                </div>
                <div class="table-wrapper" style="overflow: auto">
                    <div style="width: 3500px">
                        <table class="i-table i-table-border">
                            <thead>
                            <tr>
                                <th>序号</th>
                                <th v-if="userLevel == 'xs'">操作</th>
                                <th>报备日期</th>
                                <th>销售部门</th>
                                <th>销售</th>
                                <th>售前</th>
                                <th>区域</th>
                                <th>客户所在省份</th>
                                <th>客户属性</th>
                                <th>客户编号</th>
                                <th>客户名称
                                    <div class="desc">
                                    <span @click="ascClick" :class="ascActive == true?'active' : ''"
                                          class="icon-asc">
                                        <i class="fa fa-caret-up"></i>
                                    </span>
                                        <span @click="descClick"
                                              class="icon-desc" :class="descActive == true?'active' : ''">
                                        <i class="fa fa-caret-down"></i>
                                    </span>
                                    </div>
                                </th>
                                <th>解决方案名称</th>
                                <th>行业线</th>
                                <th v-if="userPermission === 'pipelineProjectType'">项目类型</th>
                                <th>项目性质</th>
                                <th>合作伙伴名称</th>
                                <th>预计签约金额<br/>（万元）</th>
                                <th>预计签约时间</th>
                                <th>项目阶段</th>
                                <th>成功率</th>
                                <th>加权金额<br/>（万元）</th>
                                <th>项目跟进情况</th>
                                <th>确切需要其他部门<br/>配合的地方</th>
                                <th>竞争对手</th>
                                <th>客户来源</th>
                                <th>项目名称</th>
                                <th>金融银行分类</th>
                            </tr>
                            </thead>
                            <tbody>
                            <!--(vm.dataPageNum -1) * 10 + (index)-->
                            <tr v-for="(item, index) in items"
                                @dblclick="openUpdateCase()"
                                @click="showOneChange(item.soCoreCode, index)"
                                :class="{ active: isClicked == index } ">
                                <td>{{ (vm.dataPageNum -1) * 10 + (index + 1) }}</td>
                                <td v-if="userLevel == 'xs'">
                                    <a @click="handleData(item)"
                                       data-toggle="modal"
                                       data-target=".myModal"
                                       class="modelDomBtn"
                                       href="javascript:;"><i class="fa fa-edit"></i></a></td>
                                <td>{{ item.reportDate }}</td>
                                <td>{{ item.salesGroupName }}</td>
                                <td>{{ item.salesStaffName }}</td>
                                <td>
                                    <div v-if="item.preSaleStaffs">
                                        <div v-for="preSaleStaffs in item.preSaleStaffs">
                                                <span v-if="preSaleStaffs">
                                                    {{ preSaleStaffs.userName }}
                                                </span>

                                        </div>
                                    </div>
                                    <div v-else>&nbsp;</div>
                                </td>
                                <td>{{ item.region }}</td>
                                <td>{{ item.province }}</td>
                                <td>{{ item.customerProperties }}</td>
                                <td>{{ item.customerCode }}</td>
                                <td>{{ item.customerName }}</td>
                                <td>
                                    <div class="onetext">
                                        <div v-if="item.solutionSub">
                                            <div v-for="solutionSub in item.solutionSub">
                                                    <span v-if="solutionSub">
                                                        {{ solutionSub.solutionName }}
                                                    </span>
                                            </div>
                                        </div>
                                        <div v-else>&nbsp;</div>
                                    </div>
                                </td>
                                <td>{{ item.industryLine }}</td>
                                <td v-if="userPermission === 'pipelineProjectType'">{{ item.projectType }}</td>
                                <td>{{ item.projectNature }}</td>
                                <td>
                                    <div class="onetext">{{ item.cooperativePartner }}</div>
                                </td>
                                <td>{{ addSum(item.solutionSub) }}</td>
                                <td>{{ item.expectSignDate }}</td>
                                <td>{{ item.progress }}</td>
                                <td>{{ item.successRate }}</td>
                                <td>{{ item.weightedSum }}</td>
                                <td>
                                    <div class="onetext">{{ item.projectFollowUpRemark }}</div>
                                </td>
                                <td>
                                    <div class="onetext">{{ item.othDescription }}</div>
                                </td>
                                <td>
                                    <div class="onetext">{{ item.competitor }}</div>
                                </td>
                                <td>{{ item.customerSource }}</td>
                                <td>
                                    <div class="onetext">{{ item.projectDescription }}</div>
                                </td>
                                <td>{{ item.classificationOfFinancialIndustry }}</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div v-if="noData"
                         style="padding: 20px;text-align: center">暂无相关数据</div>
                </div>
            </div>
            <div class="updateCase" :class="{'hide': updateCaseShow}">
                <div class="title clearfix">
                    <span>项目更新情况</span>
                    <a @click="closeUpdateCase" class="close pull-right" href="javascript:;">
                        <i class="fa fa-close"></i>
                    </a>
                </div>
                <div class="content">
                    <div v-model="noUpdateCase"
                         style="text-align: center">{{ updateCaseMsg }}</div>
                    <ul class="block">
                        <li v-for="(changeOneList,index) in changeOneLists">
                            <!--<h4>{{ changeOneList.opTime }}</h4>-->
                            <h4 v-time="new Date(changeOneList.opTime).getTime()"></h4>
                            <p>
                                <span v-html="changeOneList.operName"></span>
                                <span v-html="changeOneList.opDetail"></span>
                            </p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div :class="{'hide': pipelineJoinShow}" class="pipelineJoin clearfix">
        <div :class="{'hide': noJoinData}" class="pull-right" style="margin-bottom: 10px">
            <div class="data-page page-css">
                <div @click="calcJoinPage('join' , 'first')"
                     class="page-css-first"><i class="fa fa-angle-double-left"></i></div>
                <div @click="calcJoinPage('join' , -1)" class="page-css-prev" style="margin-right: 10px;"><i
                        class="fa fa-angle-left"></i></div>
                <span>第</span><input @keyup.enter="joinEnter" type="text" style="margin: 0 5px;" v-model="joinPageNum"><span>页</span>
                <span>共 {{joinPageSum}} 页，</span>
                <div @click="calcJoinPage('join' , 1)"
                     class="page-css-next"><i class="fa fa-angle-right  "></i></div>
                <div @click="calcJoinPage('join' , 'last')" class="page-css-last" style="margin-right: 10px;"><i
                        class="fa fa-angle-double-right"></i></div>
                <span>显示</span>
                <span style="margin-left: 5px;">{{joinPageStart}}</span>
                <span>-</span>
                <span style="margin-right: 5px;">{{joinPageEnd}}</span>
                <span>条，</span>
                <span>共&nbsp; {{joinPageTotal}} &nbsp;条</span>
            </div>
        </div>
        <div class="table-wrapper" style="overflow: auto;width: 100%">
            <div style="width: 3500px">
                <table class="i-table">
                    <thead>
                    <tr>
                        <th>序号</th>
                        <th :class="{'hide': userLevel === 'dqxyh'}">
                            <div class="highlight">操作</div></th>
                         <th><div class="highlight">
                             状态
                         </div></th>
                        <th>报备日期</th>
                        <th>销售部门</th>
                        <th>负责销售</th>
                        <th>负责售前</th>
                        <th>区域</th>
                        <th>客服所在省份</th>
                        <th>客户编码</th>
                        <th>合作伙伴名称</th>
                        <th>合作伙伴类型</th>
                        <th>最终客户名称</th>
                        <th>项目名称</th>
                        <th>解决方案名称</th>
                        <th>行业线</th>
                        <th>预计签约金额<br/>（万元）</th>
                        <th>预计签约时间</th>
                        <th>项目阶段</th>
                        <th>成功率</th>
                        <th>加权金额<br/>（万元）</th>
                        <th>项目跟进情况</th>
                        <th>竞争对手</th>
                        <th>客户来源</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr v-for="(pipelineList, index) in pipelineData.root">
                        <td>{{ (vm.dataPageNum -1) * 10 + (index + 1) }}</td>
                        <td :class="{'hide': userLevel === 'dqxyh'}">
                            <!-- 针对销售 ,当状态为已分配直销销售时，显示确认按钮 -->
                            <div v-if="userLevel == 'xs' && pipelineList.status == 'assignSalesStaff'"
                                 @click="confirmData(pipelineList.id, index)"
                                 class="btn btn-xs btn-border">确认</div>
                            <!-- 针对销售 ,当状态为已签收/直销销售驳回时，显示确认按钮,但不可点击 -->
                            <div v-if="userLevel == 'xs' && (pipelineList.status == 'signIn' || pipelineList.status == 'rejectSalesStaff')"
                                 @click="confirmData(pipelineList.id, index)"
                                 class="btn btn-xs btn-border disabled">确认</div>

                            <!-- 针对销售老大 ,当状态为已分配直销事业部/直销销售驳回 时，显示分配按钮-->
                            <div v-if="userLevel == 'xsld' && (pipelineList.status == 'assignSalesGroup' || pipelineList.status == 'rejectSalesStaff')"
                                 @click="allotData(pipelineList.id, index)"
                                 class="btn btn-xs btn-border">分配</div>
                            <!-- 针对销售老大 ,当状态为已分配直销销售/直销销售驳回至直销事业部/已签收时，显示分配按钮，但不可点击-->
                            <div v-if="userLevel == 'xsld' && (pipelineList.status == 'assignSalesStaff' || pipelineList.status == 'rejectSalesGroup' || pipelineList.status == 'signIn')"
                                 @click="allotData(pipelineList.id, index)"
                                 class="btn btn-xs btn-border disabled">分配</div>
                        </td>
                        <td>
                            <span v-if="userLevel == 'xs' && pipelineList.status == 'assignSalesStaff'"
                                  class="type-pending">待确认</span>
                            <span v-if="userLevel == 'xs' && pipelineList.status == 'signIn'"
                                  class="type-pass">已确认</span>
                            <span v-if="userLevel == 'xs' && pipelineList.status == 'rejectSalesStaff'"
                                  class="type-reject">已驳回</span>
                            <span v-if="userLevel == 'xsld' && pipelineList.status == 'signIn'"
                                  class="type-pass">已签收</span>
                            <span v-if="userLevel == 'xsld' && pipelineList.status == 'assignSalesGroup'"
                                  class="type-pending">待分配</span>
                            <span v-if="userLevel == 'xsld' && pipelineList.status == 'assignSalesStaff'"
                                  class="type-pass">已分配</span>
                            <span v-if="userLevel == 'xsld' && pipelineList.status == 'rejectSalesGroup'"
                                  class="type-reject">已驳回</span>
                            <span v-if="userLevel == 'xsld' && pipelineList.status == 'rejectSalesStaff'"
                                  class="type-reject">被退回</span>
                           <!-- <span v-text="pipelineList.status"></span>
                            <span v-text="pipelineList.statusName" class="type-unsubmitted"></span>-->
                        </td>
                        <td v-text="pipelineList.reportDate"></td>
                        <td v-if="pipelineList.departmentName === null">-</td>
                        <td v-if="pipelineList.departmentName !== null" v-text="pipelineList.departmentName"></td>
                        <td v-if="pipelineList.salesStaffName === null">-</td>
                        <td v-if="pipelineList.salesStaffName !== null" v-text="pipelineList.salesStaffName"></td>
                        <td v-text="pipelineList.preSalesStaff"></td>
                        <td v-text="pipelineList.regionName"></td>
                        <td v-text="pipelineList.provinceName"></td>
                        <td v-text="pipelineList.cpCustomerCode"></td>
                        <td>
                            <div class="onetext" v-text="pipelineList.cpCustomerName"></div>
                        </td>
                        <td v-text="pipelineList.cpCustomerTypeName"></td>
                        <td>
                            <div class="onetext" v-text="pipelineList.customerName"></div>
                        </td>
                        <td>
                            <div class="onetext" v-text="pipelineList.projectDescription"></div>
                        </td>
                        <td>
                            <div class="onetext" v-text="pipelineList.solutionName"></div>
                        </td>
                        <td v-text="pipelineList.industryLineName"></td>
                        <td v-text="pipelineList.expectSignSum"></td>
                        <td v-text="pipelineList.expectSignDate"></td>
                        <td v-text="pipelineList.progressName"></td>
                        <td v-text="pipelineList.successRateName"></td>
                        <td v-text="pipelineList.weightedSum"></td>
                        <td>
                            <div class="onetext" v-text="pipelineList.projectFollowUpRemark"></div>
                        </td>
                        <td v-text="pipelineList.competitor"></td>
                        <td v-text="pipelineList.customerSourceName"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div v-if="noJoinData"
                 style="padding: 20px;text-align: center">暂无相关数据</div>
        </div>
    </div>

    <!-- 弹窗 -->
    <div class="dialog-wrap" :class="{'hide': dialogShow}">
        <div @click="hidePop" class="dialog-cover"></div>
        <!--新增修改pipeline-->
        <div :class="{'hide': handleTemplateShow}" class="dialog-content" style="width: auto">
            <div class="title clearfix">
                <p v-if="handleTemplate.soCoreCode != null" class="pull-left">修改 Pipeline</p>
                <p v-if="handleTemplate.soCoreCode == null" class="pull-left">新增 Pipeline</p>
                <p @click="hidePop" class="dialog-close pull-right" ><i class="fa fa-close"></i></p>
            </div>
            <div class="main" style="padding: 20px;">
                <div id="aboutPipeline" class="data-wrapper">
                    <div class="wrapper">
                        <div class="main">
                            <form class="clearfix" id="dataSubmit" action="">
                                <input type="hidden" v-model="handleTemplate.soCoreCode" name="soCoreCode">
                                <input type="hidden" v-model="nothing">  <!--多选框需触发-->
                                <div class="block-wrapper">
                                    <div class="input-group">
                                        <span class="input-group-label">报备日期:</span>
                                        <span style="line-height: 30px;">{{ hReportDate }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="dropdown-wrap">
                                        <i class="star">*</i>
                                        <span class="dropdown-label">所属销售部门：</span>
                                        <span style="line-height: 30px;">{{ hSalesGroupText }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="input-group">
                                        <span class="input-group-label">负责销售:</span>
                                        <span style="line-height: 30px;">{{ hSalesStaffName }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="input-group">
                                        <span class="input-group-label">负责售前:</span>
                                        <input v-model="preSaleStaffs.userCode" class="input-group-form" type="text">
                                    </div>
                                </div>
                                <div class="block-wrapper col-1">
                                    <div class="input-group">
                                        <i class="star">*</i>
                                        <span class="input-group-label">区域:</span>
                                        <ul class="item-list clearfix">
                                            <li @click="selectRegion(searchList.code, index)"
                                                v-for="(searchList,index) in searchLists.regions"
                                                :class="{'active': handleTemplate.regionCode == searchList.code, 'disabled': notLinked}">{{ searchList.text }}</li>
                                        </ul>
                                    </div>
                                </div>
                                <div :class="{'hide': provinceShow}" class="block-wrapper col-1">
                                    <div class="input-group">
                                        <i class="star">*</i>
                                        <span class="input-group-label">客户所在省份:</span>
                                        <ul class="item-list clearfix">
                                            <li @click="selectProvince(provinceList.code)"
                                                v-for="(provinceList,index) in provinceLists"
                                                :class="{'active': provinceList.code == handleTemplate.provinceCode, 'disabled': notLinked}">{{ provinceList.text }}</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="input-group">
                                        <i class="star">*</i>
                                        <span class="input-group-label">客户属性:</span>
                                        <ul id="selected" class="item-list selected clearfix">
                                            <li @click="selectCustomerAttr(customerName.code, index)"
                                                v-for="(customerName,index) in customerAttr"
                                                :class="{'active': customerName.code == handleTemplate.customerPropertiesCode}">{{ customerName.text }}</li>
                                        </ul>
                                    </div>
                                </div>
                                <div v-if="userPermission === 'pipelineProjectType'" class="block-wrapper">
                                    <div class="dropdown-wrap">
                                        <i class="star">*</i>
                                        <span class="dropdown-label">项目类型：</span>
                                        <div class="dropdown">
                                            <span class="dropdown-default">{{ hProjectType }}</span>
                                            <i class="fa fa-angle-down"></i>
                                            <ul>
                                                <li @click="selectProjectType(projectTypeList.code, projectTypeList.text)"
                                                    v-for="projectTypeList in projectTypeLists"
                                                    :value="projectTypeList.code">{{ projectTypeList.text }}</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="block-wrapper col-1">
                                    <div class="input-group">
                                        <i class="star">*</i>
                                        <span class="input-group-label">客户名称:</span>
                                        <div style="position: relative;display: inline-block;">
                                            <input v-model="hCustomerName"
                                                   @keyup="getFuzzyList(2)"
                                                   type="text" class="input-group-form input-lg">
                                            <ul v-if="fuzzyQueryList_2.length !== 0" class="fuzzy-query" style="left: 0">
                                                <li @click="selectFuzzyText(2, item.name, item.code, item.departmentCode, item.hasConcat, item.whole)"
                                                    v-for="item in fuzzyQueryList_2"
                                                    v-text="item.name"
                                                ></li>
                                            </ul>
                                        </div>
                                        <!--
                                        <a @click="selectCustomer"
                                           href="javascript:;"
                                           style="margin-left: 10px;font-weight: bold;font-size: 18px;display: none;">+</a>-->
                                    </div>
                                </div>
                                <div class="block-wrapper col-1">
                                    <div class="input-group">
                                        <span class="input-group-label">项目名称:</span>
                                        <input v-model="handleTemplate.projectDescription" class="input-group-form input-lg" type="text">
                                    </div>
                                </div>
                                <div class="block-wrapper col-1">
                                    <div class="input-group">
                                        <span class="input-group-label">最终客户名称:</span>
                                        <input @keyup="finalCustomerKeyup" v-model="handleTemplate.finalCustomer" class="input-group-form input-lg" type="text">
                                    </div>
                                </div>
                                <div :class="{'hide': hasFinalCustomer}" class="block-wrapper col-1">
                                    <div class="input-group">
                                        <i class="star">*</i>
                                        <span class="input-group-label">最终客户所在区域:</span>
                                        <ul class="item-list clearfix">
                                            <li @click="selectFinalCustomerRegion(regionList.code, index)"
                                                v-for="(regionList,index) in regionLists"
                                                :class="{'active': handleTemplate.finalCustomerRegion == regionList.code}">{{ regionList.text }}</li>
                                        </ul>
                                    </div>
                                </div>
                                <div :class="{'hide': hasFinalCustomer}" class="block-wrapper col-1">
                                    <div class="input-group">
                                        <i class="star">*</i>
                                        <span class="input-group-label">最终客户所在省份:</span>
                                        <ul class="item-list clearfix">
                                            <li @click="selectFinalCustomerProvince(finalCustomerProvinceList.code)"
                                                v-for="(finalCustomerProvinceList,index) in finalCustomerProvinceLists"
                                                :class="{'active': finalCustomerProvinceList.code == handleTemplate.finalCustomerProvince}">{{ finalCustomerProvinceList.text }}</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="block-wrapper col-1">
                                    <div class="dropdown-wrap" style="display: inline-block">
                                        <span class="dropdown-label">解决方案：</span>
                                        <div class="dropdown">
                                            <span class="dropdown-default" style="max-width: 500px;">{{ hSoSolutionFirstText }}</span>
                                            <i class="fa fa-angle-down"></i>
                                            <ul style="max-width: 500px;">
                                                <li @click="searchSolutionFirst('', '', 2)">请选择</li>
                                                <li @click="searchSolutionFirst(solutionFirstList.id, solutionFirstList.text, 2)"
                                                    v-for="solutionFirstList in solutionFirstLists">{{ solutionFirstList.text }}</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="dropdown-wrap" style="display: inline-block">
                                        <span class="dropdown-label" style="width: 26px">-</span>
                                        <div class="dropdown">
                                            <span class="dropdown-default" style="max-width: 500px;">{{ hSoSolutionSecondText }}</span>
                                            <i class="fa fa-angle-down"></i>
                                            <ul style="max-width: 500px;">
                                                <li @click="searchSolutionSecond('', '', 2)">请选择</li>
                                                <li @click="searchSolutionSecond(solutionSecondList.data.code, solutionSecondList.text, 2)"
                                                    v-for="solutionSecondList in solutionSecondLists">{{ solutionSecondList.text }}</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="dropdown-wrap">
                                        <i class="star">*</i>
                                        <span class="dropdown-label">行业线：</span>
                                        <div class="dropdown">
                                            <span class="dropdown-default">{{ hIndustryLineText }}</span>
                                            <i class="fa fa-angle-down"></i>
                                            <ul>
                                                <li @click="selectIndustryLineCode(searchList.code, searchList.text)"
                                                    v-for="searchList in searchLists.industryLines"
                                                    :value="searchList.code">{{ searchList.text }}</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="input-group">
                                        <span class="input-group-label">合作伙伴:</span>
                                        <input v-model="handleTemplate.cooperativePartner"
                                               class="input-group-form"
                                               type="text">
                                    </div>
                                </div>
                                <div class="block-wrapper col-1">
                                    <div class="dropdown-wrap pull-left">
                                        <span class="dropdown-label">金融银行分类:</span>
                                        <div class="dropdown">
                                            <span class="dropdown-default">{{ hClassificationText }}</span>
                                            <i class="fa fa-angle-down"></i>
                                            <ul>
                                                <li @click="selectClassificationCode(classificationList.code, classificationList.text)"
                                                    v-for="classificationList in classificationLists"
                                                    :value="classificationList.code">{{ classificationList.text }}</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div :class="{'hide': selectClassificationQita}" class="input-group pull-left" style="margin-left: 20px">
                                        <input v-model="hClassificationInput" class="input-group-form" type="text">
                                    </div>
                                </div>
                                <div class="block-wrapper col-1">
                                    <div class="input-group">
                                        <i class="star">*</i>
                                        <span class="input-group-label">项目性质:</span>
                                        <ul class="item-list clearfix">
                                            <li @click="selectProjectNature(searchList.code, index)"
                                                v-for="(searchList,index) in searchLists.projectNatures"
                                                :class="{'active': handleTemplate.projectNatureCode == searchList.code}">{{ searchList.text }}</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="dropdown-wrap">
                                        <i class="star">*</i>
                                        <span class="dropdown-label">客户来源：</span>
                                        <div class="dropdown">
                                            <span class="dropdown-default">{{ hCustomerSourceText }}</span>
                                            <i class="fa fa-angle-down"></i>
                                            <ul>
                                                <li @click="selectCustomerSourceCode(searchList.code, searchList.text)"
                                                    v-for="searchList in searchLists.customerSours">{{ searchList.text }}</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="input-group">
                                        <i class="star">*</i>
                                        <span class="input-group-label">预计签约时间：</span>
                                        <div class="i-date-picker-container">
                                            <div class="date-input-box  icon iconfont icon-cale-a">
                                                <input v-model="handleTemplate.expectSignDate"
                                                       readonly="readonly"
                                                       type="text"
                                                       id="signDate"
                                                       class="i-date-picker"
                                                       data-calendar="true" >
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="input-group">
                                        <i class="star">*</i>
                                        <span class="input-group-label" style="width: auto">预计签约金额（万元）:</span>
                                        <input v-model="solutionSub.expectSignSum"
                                               class="input-group-form"
                                               type="number"
                                               @keyup="sumKeyup()"
                                               style="text-align: right;padding-right: 10px">
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="input-group">
                                        <span class="input-group-label" style="width: auto">加权金额总计（万元）:</span>
                                        <span style="line-height: 30px;">{{ hWeightedSum }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="dropdown-wrap">
                                        <i class="star">*</i>
                                        <span class="dropdown-label">成功率：</span>
                                        <div class="dropdown">
                                            <span class="dropdown-default">{{ hSuccessRateText}}</span>
                                            <i class="fa fa-angle-down"></i>
                                            <ul>
                                                <li @click="selectSuccessRateCode(searchList.code, searchList.text)"
                                                    v-for="searchList in searchLists.projectSuccessRates">{{ searchList.text }}</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="dropdown-wrap">
                                        <i class="star">*</i>
                                        <span class="dropdown-label">项目阶段：</span>
                                        <div class="dropdown">
                                            <span class="dropdown-default">{{ hProgressText }}</span>
                                            <i class="fa fa-angle-down"></i>
                                            <ul>
                                                <li @click="selectProgressCode(progressList.code, progressList.text)"
                                                    v-for="progressList in progressLists">{{ progressList.text }}</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <!--<div :class="{'hide': successReasonShow}" class="block-wrapper col-1">-->
                                    <!--<div class="input-group">-->
                                        <!--<i class="star">*</i>-->
                                        <!--<span class="input-group-label">成功率0%原因:</span>-->
                                        <!--<input v-model="hSuccessReasonText" @keyup="successReasonKeyup" type="text" class="input-group-form" readonly="true" style="width: 520px">-->
                                        <!--&lt;!&ndash;v-model="defaultCheckedText"-->
                                               <!--@click.stop="partnerRegionProvinceBtn"-->
                                               <!--&ndash;&gt;-->
                                        <!--<div :class="{'hide': successReasonDropShow}" class="dropBlock clearfix">-->
                                            <!--<ul>-->
                                                <!--<li @click="selectSuccessReason(successReasonList.code, successReasonList.text)"-->
                                                    <!--v-for="successReasonList in successReasonLists">-->
                                                    <!--<div class="i-checkbox-group">-->
                                                        <!--<div class="i-checkbox-wrap">-->
                                                            <!--&lt;!&ndash; v-for="(_item, index) in item.province"-->
                                                             <!--@click="checkboxBtn(_item)"-->
                                                             <!--:key="_item.code"-->
                                                             <!--&ndash;&gt;-->
                                                            <!--<span class="i-checkbox-box">-->
                                                                <!--<i class="fa fa-square-o"></i>-->
                                                                <!--<transition name="fade">-->
                                                                    <!--<i class="is-show fa fa-check"></i>-->
                                                                    <!--&lt;!&ndash; v-if="styleShow(_item.code)"&ndash;&gt;-->
                                                                <!--</transition>-->
                                                            <!--</span>-->
                                                            <!--<span>{{ successReasonList.text }}</span>-->
                                                        <!--</div>-->
                                                    <!--</div>-->
                                                <!--</li>-->
                                            <!--</ul>-->
                                        <!--</div>-->
                                        <!--&lt;!&ndash;<div class="dropdown">-->
                                            <!--<span class="dropdown-default">{{ hProgressReasonText }}</span>-->
                                            <!--<i class="fa fa-angle-down"></i>-->
                                            <!--<ul>-->
                                                <!--<li @click="selectProgressReason(progressReasonList.code, progressReasonList.text)"-->
                                                    <!--v-for="progressReasonList in progressReasonLists">{{ progressReasonList.text }}</li>-->
                                            <!--</ul>-->
                                        <!--</div>&ndash;&gt;-->
                                     <!--</div>-->
                                <!--</div>-->
                                <div class="block-wrapper col-1">
                                    <div class="input-group">
                                        <!--<i class="star">*</i>-->
                                        <span class="input-group-label">竞争对手:</span>
                                        <input v-model="handleTemplate.competitor" class="input-group-form" type="text">
                                    </div>
                                </div>
                                <div class="block-wrapper col-1">
                                    <div class="input-group" style="display: block;">
                                        <span class="input-group-label">项目跟进情况:</span>
                                        <div>
                                       <textarea v-model="handleTemplate.projectFollowUpRemark" class="input-group-form" style="display: block"
                                                 placeholder="请详细的描述您申请该项资源的使用场景，内容包括但不限于该资源用于什么类型的应用，以及对该资源的具体需求如执行单元数量、内存大小等。"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="block-wrapper col-1">
                                    <div class="input-group" style="display: block;">
                                        <span class="input-group-label" style="width: auto">需要其他部门配合的地方:</span>
                                        <div>
                                        <textarea v-model="handleTemplate.othDescription" class="input-group-form" style="display: block"
                                                  placeholder="请详细的描述您申请该项资源的使用场景，内容包括但不限于该资源用于什么类型的应用，以及对该资源的具体需求如执行单元数量、内存大小等。"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="input-group">
                                        <span class="input-group-label"></span>
                                        <button :class="{'disabled': noClick}" @click="submitHandle" class="btn btn-sm btn-theme" type="button">提交</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="explain">
                            <div class="title clearfix">
                                <span>项目更新情况</span>
                                <a onclick="loadMainPage('.content-item', 'client/data.html')"
                                   class="theme-color pull-right" href="javascript:;">清空配置</a>
                            </div>
                            <div class="content" style="text-align: center;padding: 20px">
                                暂无项目更新情况
                            </div>
                        </div>
                    </div>
                    <div v-if="handleTemplate.soCoreCode != null" class="historyLog">
                        <input id="checkLog" class="hide" type="checkbox">
                        <label for="checkLog" class="head">历史变更信息<i class="fa fa-chevron-down"></i></label>
                        <div class="content">
                            <div>
                                <span class="theme-color" style="margin-right: 15px"> 变更记录</span>
                                最近一次变更时间在：<span class="theme-color">2018-03-05 09:20</span>
                                <div class="pull-right" style="display: none">这里是分页</div>
                            </div>
                            <table class="i-table i-table-border">
                                <thead>
                                <tr>
                                    <th>操作人</th>
                                    <th>操作时间</th>
                                    <th>操作明细</th>
                                    <th>操作类型</th>
                                    <th>自定义字段1</th>
                                    <th>自定义字段2</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr v-for="changeList in changeLists">
                                    <td>{{ changeList.operName }}</td>
                                    <td>{{ changeList.opTime }}</td>
                                    <td>{{ changeList.opDetail }}</td>
                                    <td>{{ changeList.opType }}</td>
                                    <td>{{ changeList.ext1 }}</td>
                                    <td>{{ changeList.ext2 }}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div><!-- /.main -->
        </div>
        <!-- 导入-需修复 -->
        <div :class="{'hide': uploadDialogShow}" class="dialog-content upload-pop"
             style="width: 400px;min-width: 400px;overflow: hidden;">
            <div class="title clearfix">
                <p class="pull-left">导入文件</p>
                <p @click="hidePop" class="dialog-close pull-right" ><i class="fa fa-close"></i></p>
            </div>
            <div class="main">
                <div class="select-file">
                    <label for="importpipeline">选择文件</label>
                    <input id="importpipeline" type="file">
                </div>
                <div class="btn-group">
                    <div @click="uploadConfirm" class="btn btn-theme">确认</div>
                    <div @click="hidePop" class="btn btn-border">取消</div>
                </div>
            </div><!-- /.main -->
        </div>
        <!-- 客户信息-需修复 -->
        <div :class="{'hide': customerDialogShow}" class="dialog-content" style="width: 1090px">
            <div class="title clearfix">
                <p class="pull-left">客户选择</p>
                <p @click="hidePop" class="dialog-close pull-right" ><i class="fa fa-close"></i></p>
            </div>
            <div class="main">
                <div class="opera clearfix">
                    <div class="industry">
                        <div class="dropdown-wrap">
                            <span class="dropdown-label">行业:</span>
                            <div class="dropdown">
                                <span v-text="hDropText" class="dropdown-default"></span>
                                <i class="fa fa-angle-down"></i>
                                <ul>
                                    <li v-for="searchList in searchLists.industryLines"
                                        v-text="searchList.text"
                                        @click="hDrop(searchList.code, searchList.text)"></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="client-num">
                        <div class="input-group">
                            <span class="input-group-label">客户编号:</span>
                            <input v-model="hClientCode" type="text" class="input-group-form">
                        </div>
                    </div>

                    <div class="client-name">
                        <div class="input-group">
                            <span class="input-group-label">客户名称:</span>
                            <div style="position: relative;display: inline-block;">
                                <!--<input v-model="hClientName"-->
                                <!--@keyup="getFuzzyList(2)"-->
                                <!--type="text" class="input-group-form">-->
                                <!--<ul v-if="fuzzyQueryList_2.length !== 0" class="fuzzy-query" style="left: 0">-->
                                <!--<li @click="selectFuzzyText(2, item)"-->
                                <!--v-for="item in fuzzyQueryList_2"-->
                                <!--v-text="item"-->
                                <!--&gt;</li>-->
                                <!--</ul>-->
                            </div>
                            <!--<input v-model="hClientName" type="text" class="input-group-form">-->
                        </div>
                    </div>

                    <div class="query-reset pull-right">
                        <div @click="queryBtn" class="btn btn-theme" style="margin-right: 20px;">查询</div>
                        <div @click="resetBtn" class="btn btn-border pull-right">重置</div>
                    </div>
                </div><!-- /.opera -->
                <div class="client">
                    <div class="table-opera clearfix">
                        <div class="pull-right">
                            <div class="client-page page-css">
                                <div @click="calcPage('client' , 'first')"
                                     class="page-css-first"><i class="fa fa-angle-double-left"></i></div>
                                <div @click="calcPage('client' , -1)" class="page-css-prev" style="margin-right: 10px;"><i
                                        class="fa fa-angle-left"></i></div>
                                <span>第</span><input @keyup.enter="clientEnter" type="text" style="margin: 0 5px;" v-model="clientPageNum"><span>页</span>
                                <span>共 {{clientPageSum}} 页，</span>
                                <div @click="calcPage('client' , 1)"
                                     class="page-css-next"><i class="fa fa-angle-right  "></i></div>
                                <div @click="calcPage('client' , 'last')" class="page-css-last" style="margin-right: 10px;"><i
                                        class="fa fa-angle-double-right"></i></div>
                                <span>显示</span>
                                <span style="margin-left: 5px;">{{clientPageStart}}</span>
                                <span>-</span>
                                <span style="margin-right: 5px;">{{clientPageEnd}}</span>
                                <span>条，</span>
                                <span>共&nbsp; {{clientPageTotal}} &nbsp;条</span>
                            </div>
                        </div>
                    </div>
                    <table class="i-table">
                        <thead style="background-color: #FAD3B2;color: #433C38;">
                        <tr>
                            <th>序号</th>
                            <th>报备名称</th>
                            <th>所属事业部</th>
                            <th>客户编号</th>
                            <th>客户名称</th>
                            <th>行业线</th>
                            <th>地址</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr v-for="(item ,index) in client.root"
                            :class="{'tr-active': index == cCheckIndex}"
                            @click="selectCustomerName(item.customerCode, item.customerName, index)">
                            <td>{{ (vm.clientPageNum -1) * 10 + (index + 1) }}</td>
                            <td v-text="item.reportDate"></td>
                            <td v-text="item.salesGroup"></td>
                            <td v-text="item.customerCode"></td>
                            <td v-text="item.customerName"></td>
                            <td v-text="item.industryLine"></td>
                            <td v-text="item.address"></td>
                        </tr>
                        </tbody>
                    </table>
                    <div style="text-align: right">
                        <button @click="selectHandle" class="btn btn-sm btn-theme" type="button">选中</button>
                    </div>

                </div><!-- /.client -->
            </div><!-- /.main -->
        </div>

        <!-- 事业部交接查看pipeline弹窗 -->
        <div :class="{'hide': checkDataShow}" class="dialog-content" style="width: auto">
            <div class="title clearfix">
                <p class="pull-left">查看 Pipeline</p>
                <p @click="hidePop" class="dialog-close pull-right" ><i class="fa fa-close"></i></p>
            </div>
            <div class="main" style="padding: 20px;">
                <div  class="data-wrapper">
                    <div class="wrapper">
                        <div class="main">
                            <form class="clearfix" action="">
                                <div class="block-wrapper">
                                    <div class="input-group">
                                        <span class="input-group-label">报备日期:</span>
                                        <span class="checkText">{{ hReportDate }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="dropdown-wrap">
                                        <i class="star">*</i>
                                        <span class="dropdown-label">销售小组：</span>
                                        <span class="checkText">{{ hSalesGroupText }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="input-group">
                                        <span class="input-group-label">负责销售:</span>
                                        <span class="checkText">{{ hSalesStaffName }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="input-group">
                                        <span class="input-group-label">负责售前:</span>
                                        <span class="checkText">{{ hPreSaleStaffsName }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="input-group">
                                        <i class="star">*</i>
                                        <span class="input-group-label">区域:</span>
                                        <span class="checkText">{{ hRegionName }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="input-group">
                                        <i class="star">*</i>
                                        <span class="input-group-label">客户所在省份:</span>
                                        <span class="checkText">{{ hProvinceName }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper col-1">
                                    <div class="input-group">
                                        <i class="star">*</i>
                                        <span class="input-group-label">合作伙伴名称:</span>
                                        <span class="checkText">{{ hCpCustomerName }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper col-1">
                                    <div class="dropdown-wrap">
                                        <i class="star">*</i>
                                        <span class="dropdown-label">合作伙伴类型：</span>
                                        <span class="checkText">{{ hCpCustomerTypeText }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper col-1">
                                    <div class="input-group">
                                        <span class="input-group-label">最终客户名称:</span>
                                        <span class="checkText">{{ handleTemplate.cpCustomerName }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper col-1">
                                    <div class="input-group">
                                        <span class="input-group-label">项目名称:</span>
                                        <span class="checkText">{{ handleTemplate.projectDescription }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper col-1">
                                    <div class="dropdown-wrap" style="display: inline-block">
                                        <span class="dropdown-label">解决方案：</span>
                                        <span class="checkText" style="display: table-cell;">{{ hSoSolutionFirstText }}</span>
                                    </div>
                                    <div class="dropdown-wrap" style="display: inline-block">
                                        <span class="dropdown-label" style="width: 26px">-</span>
                                        <span class="checkText" style="display: table-cell;">{{ hSoSolutionSecondText }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="dropdown-wrap">
                                        <span class="dropdown-label">行业线：</span>
                                        <span class="checkText">{{ hIndustryLineText }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="input-group">
                                        <span class="input-group-label" style="width: auto">预计签约金额（万元）:</span>
                                        <span class="checkText">{{ handleTemplate.expectSignSum }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="dropdown-wrap">
                                        <span class="dropdown-label">成功率：</span>
                                        <span class="checkText">{{ hSuccessRateText }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="input-group">
                                        <span class="input-group-label" style="width: auto">加权金额总计（万元）:</span>
                                        <span class="checkText">{{ hWeightedSum }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="dropdown-wrap">
                                        <i class="star">*</i>
                                        <span class="dropdown-label">客户来源：</span>
                                        <span class="checkText">{{ hCustomerSourceText }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="dropdown-wrap">
                                        <i class="star">*</i>
                                        <span class="dropdown-label">项目阶段：</span>
                                        <span class="checkText">{{ hProgressText }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper">
                                    <div class="input-group">
                                        <i class="star">*</i>
                                        <span class="input-group-label">预计签约时间：</span>
                                        <span class="checkText">{{ handleTemplate.expectSignDate }}</span>
                                    </div>
                                </div>
                                <div class="block-wrapper col-1">
                                    <div class="input-group" style="display: block;">
                                        <span class="input-group-label">项目跟进情况:</span>
                                        <p class="checkText">{{ handleTemplate.projectFollowUpRemark }}</p>
                                    </div>
                                </div>
                                <div class="block-wrapper col-1">
                                    <div class="input-group">
                                        <span class="input-group-label">竞争对手:</span>
                                        <span class="checkText">{{ handleTemplate.competitor }}</span>
                                    </div>
                                </div>
                                <div v-if="userLevel == 'xs'" class="block-wrapper col-1" style="margin-top: 40px;">
                                    <div class="input-group">
                                        <span class="input-group-label"></span>
                                        <button @click="confirmThisData(handleTemplate.id, 'signIn')"
                                                class="btn btn-sm btn-theme"
                                                type="button" style="margin-right: 20px">确认</button>
                                        <button @click="xsRejectThisData" class="btn btn-sm btn-theme" type="button">驳回</button>
                                    </div>
                                </div>
                                <div v-if="userLevel == 'xsld'" class="block-wrapper col-1" style="margin-top: 40px;margin-bottom: 30px">
                                    <div class="input-group">
                                        <span class="input-group-label"></span>
                                        <button @click="allotThisData"
                                                class="btn btn-sm btn-theme"
                                                type="button" style="margin-right: 20px">分配</button>
                                        <button @click="rejectThisData" class="btn btn-sm btn-theme" type="button">驳回</button>
                                    </div>
                                </div>
                                <div :class="{'hide': isAllotHide}" class="border-wrapper">
                                    <div class="block-wrapper col-1">
                                        <div class="dropdown-wrap">
                                            <span class="dropdown-label">分配销售:</span>
                                            <div class="dropdown">
                                                <span class="dropdown-default">{{ hSalesStaffsName }}</span>
                                                <i class="fa fa-angle-down"></i>
                                                <ul>
                                                    <li @click="selectSalesStaffs(salesStaffsList.code, salesStaffsList.text)"
                                                        v-for="salesStaffsList in salesStaffsLists">{{ salesStaffsList.text }}</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="block-wrapper col-1">
                                        <div class="input-group">
                                            <span class="input-group-label"></span>
                                            <button @click="allotToBU()"
                                                    class="btn btn-sm btn-theme"
                                                    type="button">分配</button>
                                        </div>
                                    </div>
                                </div>
                                <div :class="{'hide': isRejectHide}" class="border-wrapper">
                                    <div class="block-wrapper col-1">
                                        <div class="input-group">
                                            <span class="input-group-label">驳回理由:</span>
                                            <textarea v-model="hRemark" style="width: 300px;height: 50px"></textarea>
                                        </div>
                                    </div>
                                    <!-- 针对销售 ,状态为直销销售驳回 -->
                                    <div v-if="userLevel == 'xs'" class="block-wrapper col-1">
                                        <div class="input-group">
                                            <span class="input-group-label"></span>
                                            <button @click="rejectToXSLeader(handleTemplate.id, 'rejectSalesStaff')"
                                                    class="btn btn-sm btn-theme"
                                                    type="button">确认</button>
                                        </div>
                                    </div>
                                    <!-- 针对销售老大 ,状态为直销事业部驳回 -->
                                    <div v-if="userLevel == 'xsld'" class="block-wrapper col-1">
                                        <div class="input-group">
                                            <span class="input-group-label"></span>
                                            <button @click="rejectToXS(handleTemplate.id, 'rejectSalesGroup')"
                                                    class="btn btn-sm btn-theme"
                                                    type="button">确认</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="explain">
                            <div class="title clearfix">
                                <span>项目更新情况</span>
                                <a onclick="loadMainPage('.content-item', 'client/data.html')"
                                   class="theme-color pull-right" href="javascript:;">清空配置</a>
                            </div>
                            <div class="content" style="text-align: center;padding: 20px">
                                暂无项目更新情况
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- /.main -->
        </div>
    </div>

    <div class="dialog-wrap" :class="{'hide': secondDialogShow}">
        <div @click="hideSecondPop" class="dialog-cover"></div>
        <!-- 确认 -->
        <div :class="{'hide': revokeShow}" class="dialog-content-small dispose-pop">
            <div class="title">提示<i @click="hideSecondPop"  class="fa fa-close pull-right"></i></div>
            <div class="content">机要信息不全，请完善机要信息</div>
            <div class="foot">
                <div style="display: none" @click="yesBtn()" class="btn btn-theme">是</div>
                <div @click="hideSecondPop" class="btn btn-border">确定</div>
                <!--<div @click="hideSecondPop" class="btn btn-border">否</div>-->
            </div>
        </div>
        <!-- 确认分配弹窗 -->
        <div :class="{'hide': allotShow}" class="dialog-content-small dispose-pop">
            <div class="title clearfix">
                <p class="pull-left">提示</p>
                <p @click="hideSecondPop" class="dialog-close pull-right" ><i class="fa fa-close"></i></p>
            </div>
            <div class="content">是否分配至：<span v-text="hSalesStaffsName"></span></div>
            <div class="foot">
                <div @click="allotBtn(handleTemplate.id, 'assignSalesStaff')" class="btn btn-theme">确定</div>
                <div @click="hideSecondPop" class="btn btn-border">取消</div>
            </div>
        </div>
        <!-- 撤回弹窗 -->
        <div :class="{'hide': joinRevokeShow}" class="dialog-content-small dispose-pop"  style="height: 180px">
            <div class="title clearfix">
                <p class="pull-left">提示</p>
                <p @click="hideSecondPop" class="dialog-close pull-right" ><i class="fa fa-close"></i></p>
            </div>
            <div class="content">确定撤回吗？</div>
            <div class="foot">
                <div @click="auditBtn('revoke')" class="btn btn-theme">确定</div>
                <div @click="hideSecondPop" class="btn btn-border">取消</div>
            </div>
        </div>
    </div>
</div>
<script src="../static/scripts/manage/manageShare.js"></script>
<script src="../static/scripts/manage/manage.js?v=20180723"></script>
